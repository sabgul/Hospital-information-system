(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c586a6ae"],{"071d":function(t,e,n){"use strict";var a=n("5530"),i=n("d4ec"),o=n("bee2"),c=n("c427"),r=function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,[{key:"getAll",value:function(){return c["a"].get("examination-actions/")}},{key:"getAllByWorker",value:function(t){return c["a"].get("examination-actions/",{params:{action_manager:t}})}},{key:"getFiltered",value:function(t){var e=-1!==t.is_action_paid,n="true"===t.is_action_paid?"true":"false",i=t.action_manager;return c["a"].get("examination-actions/",{params:Object(a["a"])(Object(a["a"])({},e?{is_action_paid:n}:{}),-1!==i?{action_manager:i}:{})})}},{key:"get",value:function(t){return c["a"].get("examination-actions/".concat(t,"/"))}},{key:"create",value:function(t){return c["a"].post("examination-actions/",t)}},{key:"update",value:function(t,e){return c["a"].put("examination-actions/".concat(t,"/"),e)}},{key:"delete",value:function(t){return c["a"].delete("examination-actions/".concat(t,"/"))}},{key:"deleteAll",value:function(){return c["a"].delete("examination-actions")}}]),t}();e["a"]=new r},"1ee3":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"main__content"},[n("h1",[t._v(" Creating examination for health concern "+t._s(t.aboutConcern.name)+" of patient "+t._s(t.aboutConcern.patient.user.first_name)+" "+t._s(t.aboutConcern.patient.user.last_name)+" ")])]),n("div",{staticClass:"main__content"},[n("h3",[t._v("Date of examination & actions")]),n("br"),n("vs-input",{staticClass:"input",attrs:{label:"Date of examination",type:"date"},model:{value:t.examinationDate,callback:function(e){t.examinationDate=e},expression:"examinationDate"}}),n("br"),n("h5",[t._v("Brief description of the examination")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.examinationDescription,expression:"examinationDescription"}],attrs:{placeholder:"Briefly describe this examination.."},domProps:{value:t.examinationDescription},on:{input:function(e){e.target.composing||(t.examinationDescription=e.target.value)}}}),n("div",{staticClass:"actions"},[n("h5",[t._v(" Medical actions made during this examination: ")]),0===t.chosenActions.length?n("span",[t._v(" No actions selected ")]):t._e(),t._l(t.chosenActions,(function(e,a){return n("div",{key:a,staticClass:"action__within__examination"},[n("div",[n("span",[n("b",[t._v(t._s(e.actionData.name))]),t._v(" "),n("br"),t._v(" ("+t._s(t.getPricing(e.actionData.is_action_paid))+")")])]),n("div",{staticClass:"buttons__action"},[e.actionData.is_action_paid?n("div",{staticClass:"overpay__switch"},[n("vs-switch",{staticStyle:{bottom:"7px"},attrs:{success:""},scopedSlots:t._u([{key:"off",fn:function(){return[t._v(" Paid by patient ")]},proxy:!0},{key:"on",fn:function(){return[t._v(" Paid by insurance company ")]},proxy:!0}],null,!0),model:{value:e.cover,callback:function(n){t.$set(e,"cover",n)},expression:"action.cover"}})],1):t._e(),n("div",{staticStyle:{display:"inline-block"}},[n("vs-button",{attrs:{icon:"",danger:""},on:{click:function(e){return t.deleteAction(a)}}},[n("box-icon",{staticStyle:{fill:"#fff"},attrs:{name:"trash"}})],1)],1)])])})),n("vs-button",{staticClass:"button",attrs:{gradient:"",icon:""},on:{click:function(e){return t.addAction()}}},[n("box-icon",{staticStyle:{fill:"#fff"},attrs:{name:"message-square-add",type:"solid"}}),n("span",{staticStyle:{"margin-left":"1em"}},[t._v(" Add new action ")])],1),n("br"),n("br")],2)],1),n("div",{staticClass:"main__content"},[n("h3",[t._v("Attach the Doctor's report")]),n("br"),n("h5",[t._v("Author: "),n("b",[t._v(t._s(t.user.first_name)+" "+t._s(t.user.last_name))])]),n("h5",[t._v("Regarding the concern: "),n("b",[t._v(t._s(t.aboutConcern.name))])]),n("br"),n("h6",[t._v("Text of the report")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reportDescription,expression:"reportDescription"}],attrs:{placeholder:"Type the content of report here.."},domProps:{value:t.reportDescription},on:{input:function(e){e.target.composing||(t.reportDescription=e.target.value)}}}),n("br"),n("br"),n("h6",[t._v("Add image to report")]),n("div",{staticClass:"upload__wrapper"},[n("button",{staticClass:"upload__btn"},[t._v(" Choose an image ")]),n("input",{ref:"file",attrs:{type:"file",id:"file",accept:"image/*"},on:{change:function(e){return t.handleFileUpload()}}}),n("span",{attrs:{id:"file__chosen"}},[t._v(t._s(t.fileName?t.fileName:"No file Chosen"))])])]),n("div",{staticClass:"main__content"},[n("vs-checkbox",{staticClass:"ticket__checkbox",model:{value:t.markConcernEnded,callback:function(e){t.markConcernEnded=e},expression:"markConcernEnded"}},[t._v(" Mark health problem as resolved ")]),n("vs-button",{attrs:{success:""},on:{click:function(e){return t.saveExamination()}}},[t._v(" Save ")])],1),n("vs-dialog",{attrs:{width:"500px"},scopedSlots:t._u([{key:"header",fn:function(){return[n("h5",{staticClass:"popup__headline"},[t._v(" Select actions performed during the examination ")])]},proxy:!0},{key:"footer",fn:function(){return[n("div",{staticClass:"popup__right"},[n("vs-button",{attrs:{success:"",disabled:0===t.actionToAdd.length},on:{click:function(e){return t.addActionFinal()}}},[t._v(" Add ")])],1)]},proxy:!0}]),model:{value:t.activeActionAdd,callback:function(e){t.activeActionAdd=e},expression:"activeActionAdd"}},[n("vs-select",{staticClass:"popup__center",staticStyle:{width:"300px !important"},attrs:{label:"Actions",color:"primary"},model:{value:t.actionToAdd,callback:function(e){t.actionToAdd=e},expression:"actionToAdd"}},t._l(t.availableActions,(function(e){return n("vs-option",{key:e.id,attrs:{label:"["+t.getPricing(e.is_action_paid)+"] "+e.name,value:e.name}},[t._v(" ["+t._s(t.getPricing(e.is_action_paid))+"] "+t._s(e.name)+" ")])})),1)],1)],1)},i=[],o=(n("a4d3"),n("e01a"),n("4160"),n("d81d"),n("a434"),n("b0c0"),n("159b"),n("96cf"),n("1da1")),c=n("5530"),r=n("b81e"),s=n("8e80"),u=n("071d"),l=n("2ea1"),d=n("fa1c"),p=n("b944"),f=n("8ba5"),v=n("2f62"),m={name:"Examine",computed:Object(c["a"])({},Object(v["b"])(["user"])),props:{id:String},data:function(){return{aboutConcern:{},examinationDate:"",activeActionAdd:!1,actionToAdd:"",examinationDescription:"",reportDescription:"",markConcernEnded:!1,chosenActions:[],availableActions:[],askToCover:!0,file:"",fileName:""}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r["a"].get(t.id).then((function(e){t.aboutConcern=e.data})).catch((function(e){s["a"].failPopup(e,t.$vs)})),u["a"].getAll().then((function(e){t.availableActions=e.data})),n=new Date,a=n.getDate(),i=n.getMonth(),i+=1,o=n.getFullYear(),t.examinationDate=o+"-"+i+"-"+a;case 8:case"end":return e.stop()}}),e)})))()},methods:{handleFileUpload:function(){this.file=this.$refs.file.files[0],this.fileName=this.$refs.file.files[0].name},addAction:function(){this.activeActionAdd=!0},addActionFinal:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:u["a"].get(t.actionToAdd).then((function(e){t.chosenActions.push({actionData:e.data,cover:!0}),t.activeActionAdd=!1})).catch((function(e){s["a"].failPopup(e,t.$vs)}));case 1:case"end":return e.stop()}}),e)})))()},getPricing:function(t){return t?"PAID":"FREE"},deleteAction:function(t){this.chosenActions.splice(t,1)},saveExamination:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={date_of_examination:d["a"].getDateForBackend(t.examinationDate),examinating_doctor:t.user.id,concern:t.aboutConcern.id,request_based_on:null,actions:t.chosenActions.map((function(t){return t.actionData.name})),description:t.examinationDescription},p["a"].create(n).then((function(e){s["a"].successPopup("Examination created.",t.$vs);var n=e.data.id,a=new FormData;t.file&&a.append("photo",t.file,t.file.name),a.append("created_by",t.user.id),a.append("about_concern",t.aboutConcern.id),a.append("description",t.reportDescription),a.append("during_examination",n),f["a"].create(a).then((function(t){console.log(t)})).catch((function(e){s["a"].failPopup(e,t.$vs)})),t.chosenActions.forEach((function(e){if(e.cover){var a={examination_action:e.actionData.name,request_state:"UD",related_to_patient:t.aboutConcern.patient.user.id,during_examination:n,transaction_approver:e.actionData.action_manager.user.id};l["a"].create(a).then((function(t){console.log(t)})).catch((function(e){s["a"].failPopup(e,t.$vs)}))}}))})).catch((function(e){s["a"].failPopup(e,t.$vs)})),a={name:t.aboutConcern.name,description:t.aboutConcern.description,state:t.markConcernEnded?"ED":"ON",patient:t.aboutConcern.patient.user.id,doctor:t.aboutConcern.doctor.user.id},r["a"].update(t.aboutConcern.id,a).then((function(t){console.log(t)})).catch((function(e){s["a"].failPopup(e,t.$vs)})),e.next=6,t.$router.go(-1);case 6:case"end":return e.stop()}}),e)})))()}}},_=m,h=(n("26d1"),n("0c7c")),b=Object(h["a"])(_,a,i,!1,null,"1ba54efb",null);e["default"]=b.exports},"26d1":function(t,e,n){"use strict";var a=n("ac90"),i=n.n(a);i.a},"2ea1":function(t,e,n){"use strict";var a=n("d4ec"),i=n("bee2"),o=n("c427"),c=function(){function t(){Object(a["a"])(this,t)}return Object(i["a"])(t,[{key:"getAll",value:function(){return o["a"].get("transaction-requests/")}},{key:"get",value:function(t){return o["a"].get("transaction-requests/".concat(t,"/"))}},{key:"create",value:function(t){return o["a"].post("transaction-requests/",t)}},{key:"update",value:function(t,e){return o["a"].put("transaction-requests/".concat(t,"/"),e)}},{key:"delete",value:function(t){return o["a"].delete("transaction-requests/".concat(t,"/"))}},{key:"deleteAll",value:function(){return o["a"].delete("transaction-requests")}}]),t}();e["a"]=new c},a434:function(t,e,n){"use strict";var a=n("23e7"),i=n("23cb"),o=n("a691"),c=n("50c4"),r=n("7b0b"),s=n("65f0"),u=n("8418"),l=n("1dde"),d=n("ae40"),p=l("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,m=Math.min,_=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p||!f},{splice:function(t,e){var n,a,l,d,p,f,b=r(this),g=c(b.length),x=i(t,g),y=arguments.length;if(0===y?n=a=0:1===y?(n=0,a=g-x):(n=y-2,a=m(v(o(e),0),g-x)),g+n-a>_)throw TypeError(h);for(l=s(b,a),d=0;d<a;d++)p=x+d,p in b&&u(l,d,b[p]);if(l.length=a,n<a){for(d=x;d<g-a;d++)p=d+a,f=d+n,p in b?b[f]=b[p]:delete b[f];for(d=g;d>g-a+n;d--)delete b[d-1]}else if(n>a)for(d=g-a;d>x;d--)p=d+a-1,f=d+n-1,p in b?b[f]=b[p]:delete b[f];for(d=0;d<n;d++)b[d+x]=arguments[d+2];return b.length=g-a+n,l}})},ac90:function(t,e,n){},d81d:function(t,e,n){"use strict";var a=n("23e7"),i=n("b727").map,o=n("1dde"),c=n("ae40"),r=o("map"),s=c("map");a({target:"Array",proto:!0,forced:!r||!s},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},e01a:function(t,e,n){"use strict";var a=n("23e7"),i=n("83ab"),o=n("da84"),c=n("5135"),r=n("861d"),s=n("9bf2").f,u=n("e893"),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new l(t):void 0===t?l():l(t);return""===t&&(d[e]=!0),e};u(p,l);var f=p.prototype=l.prototype;f.constructor=p;var v=f.toString,m="Symbol(test)"==String(l("test")),_=/^Symbol\((.*)\)[^)]+$/;s(f,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,e=v.call(t);if(c(d,t))return"";var n=m?e.slice(7,-1):e.replace(_,"$1");return""===n?void 0:n}}),a({global:!0,forced:!0},{Symbol:p})}}}]);
//# sourceMappingURL=chunk-c586a6ae.d5424f60.js.map
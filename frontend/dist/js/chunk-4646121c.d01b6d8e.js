(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4646121c"],{"3c4d":function(e,t,a){"use strict";var n=a("862e"),r=a.n(n);r.a},"40e8":function(e,t,a){e.exports=a.p+"img/profile_edit.43b0a0d5.svg"},"862e":function(e,t,a){},b813:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"main__content"},[n("h1",[e._v(" Editing "),n("b",[e._v(e._s(e.userData.first_name)+" "+e._s(e.userData.last_name))]),e._v("'s profile ")])]),n("div",{staticClass:"main__content"},[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"first__row"},[n("vs-input",{attrs:{label:"First name",color:"primary"},scopedSlots:e._u([0===e.newUserData.first_name.length?{key:"message-warn",fn:function(){return[e._v(" Required ")]},proxy:!0}:null],null,!0),model:{value:e.newUserData.first_name,callback:function(t){e.$set(e.newUserData,"first_name",t)},expression:"newUserData.first_name"}}),n("br"),n("vs-input",{attrs:{label:"Last name",color:"primary"},scopedSlots:e._u([0===e.newUserData.last_name.length?{key:"message-wan",fn:function(){return[e._v(" Required ")]},proxy:!0}:null],null,!0),model:{value:e.newUserData.last_name,callback:function(t){e.$set(e.newUserData,"last_name",t)},expression:"newUserData.last_name"}})],1),n("div",{staticClass:"second__row"},[n("vs-input",{attrs:{label:"Date of birth",color:"primary",type:"date"},model:{value:e.newUserData.date_of_birth,callback:function(t){e.$set(e.newUserData,"date_of_birth",t)},expression:"newUserData.date_of_birth"}}),n("br"),n("vs-input",{attrs:{label:"Phone number",color:"primary"},scopedSlots:e._u([e.newUserData.phone_number&&!e.validNumber?{key:"message-danger",fn:function(){return[e._v(" Invalid phone number ")]},proxy:!0}:null],null,!0),model:{value:e.newUserData.phone_number,callback:function(t){e.$set(e.newUserData,"phone_number",t)},expression:"newUserData.phone_number"}})],1),n("div",{staticClass:"third__row"},["doctor"===e.role?n("vs-input",{attrs:{label:"Doctor specialisation",color:"primary"},model:{value:e.newDoctorSpecialisation,callback:function(t){e.newDoctorSpecialisation=t},expression:"newDoctorSpecialisation"}}):e._e(),"health-insurance-worker"===e.role?n("vs-input",{attrs:{label:"Insurance company",color:"primary"},model:{value:e.newWorkerCompany,callback:function(t){e.newWorkerCompany=t},expression:"newWorkerCompany"}}):e._e(),"patient"===e.role?n("vs-select",{attrs:{label:"Main doctor"},model:{value:e.newPatientMainDoc,callback:function(t){e.newPatientMainDoc=t},expression:"newPatientMainDoc"}},e._l(e.doctors,(function(t){return n("vs-option",{key:t.user.id,attrs:{label:t.user.first_name,value:t.user.id}},[e._v(" "+e._s(t.user.first_name)+" ")])})),1):e._e()],1),n("div",{staticClass:"submit__row",staticStyle:{"margin-bottom":"5em","margin-top":"2em"}},[n("vs-button",{staticStyle:{padding:"3px 25px"},attrs:{border:""},on:{click:e.resetUserData}},[e._v(" Reset unsaved ")]),n("vs-button",{staticStyle:{padding:"3px 28px"},attrs:{disabled:e.newUserData.phone_number&&!e.validNumber||0===e.newUserData.first_name.length||0===e.newUserData.last_name.length},on:{click:e.saveChanges}},[e._v(" Save changes ")])],1)])]),n("img",{staticClass:"background__img",attrs:{src:a("40e8"),alt:""}})])},r=[],i=(a("fb6a"),a("5530")),o=(a("96cf"),a("1da1")),s=a("1813"),c=a("ab39"),l=a("b2a5"),u=a("cb9c"),p=a("8e80"),d={name:"EditProfile",props:{id:String,role:String},data:function(){return{userData:{},newUserData:{},doctors:[],workerCompany:"",newWorkerCompany:"",doctorSpecialization:"",newDoctorSpecialisation:"",patientMainDoc:"",newPatientMainDoc:""}},computed:{validNumber:function(){return/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im.test(this.newUserData.phone_number)}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:c["a"].getAll().then((function(t){e.doctors=t.data}));case 1:case"end":return t.stop()}}),t)})))()},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:u["a"].get(e.id).then((function(t){e.userData=t.data,e.newUserData=Object(i["a"])({},e.userData)})),"patient"===e.role&&s["a"].get(e.id).then((function(t){e.patientMainDoc=t.data.main_doctor.user.id,e.newPatientMainDoc=e.patientMainDoc})),"doctor"===e.role&&c["a"].get(e.id).then((function(t){e.doctorSpecialization=t.data.specializes_in,e.newDoctorSpecialisation=e.doctorSpecialization})),"health-insurance-worker"===e.role&&l["a"].get(e.id).then((function(t){e.workerCompany=t.data.works_for_company,e.newWorkerCompany=e.workerCompany}));case 4:case"end":return t.stop()}}),t)})))()},methods:{formatDate:function(e){var t=e.slice(8,10),a=e.slice(5,7),n=e.slice(0,4);return n+"-"+a+"-"+t},resetUserData:function(){this.newUserData=Object(i["a"])({},this.userData),this.newWorkerCompany=this.workerCompany,this.newDoctorSpecialisation=this.doctorSpecialization,this.newPatientMainDoc=this.patientMainDoc},saveChanges:function(){var e=this,t={first_name:this.newUserData.first_name,last_name:this.newUserData.last_name,date_of_birth:this.newUserData.date_of_birth,phone_number:this.newUserData.phone_number};if(u["a"].updateSelected(this.id,t).then((function(t){console.log(t),p["a"].successPopup("User data successfully edited.",e.$vs),e.userData=Object(i["a"])({},e.newUserData)})).catch((function(t){p["a"].failPopup(t,e.$vs)})),"doctor"===this.role){var a={user:this.id,specializes_in:this.newDoctorSpecialisation};c["a"].update(this.id,a).then((function(t){console.log(t),e.doctorSpecialization=e.newDoctorSpecialisation})).catch((function(t){p["a"].failPopup(t,e.$vs)}))}if("health-insurance-worker"===this.role){var n={user:this.id,works_for_company:this.newWorkerCompany};l["a"].update(this.id,n).then((function(t){console.log(t),e.workerCompany=e.newWorkerCompany})).catch((function(t){p["a"].failPopup(t,e.$vs)}))}if("patient"===this.role){var r={user:this.id,main_doctor:this.newPatientMainDoc};s["a"].update(this.id,r).then((function(t){console.log(t),e.patientMainDoc=e.newPatientMainDoc})).catch((function(t){p["a"].failPopup(t,e.$vs)}))}}}},m=d,h=(a("3c4d"),a("0c7c")),w=Object(h["a"])(m,n,r,!1,null,"95544d4c",null);t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-4646121c.d01b6d8e.js.map
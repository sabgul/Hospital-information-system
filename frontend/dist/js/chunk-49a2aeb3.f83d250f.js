(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49a2aeb3"],{"3bcd":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),s("div",{staticClass:"main__content"},[s("h5",[e._v(" All system users ")]),s("br"),s("vs-table",{staticClass:"users__table",attrs:{striped:""},scopedSlots:e._u([{key:"header",fn:function(){return[s("vs-input",{attrs:{border:"",placeholder:"Search"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})]},proxy:!0},{key:"thead",fn:function(){return[s("vs-tr",[s("vs-th",[e._v(" User name ")]),s("vs-th",[e._v(" Role ")]),s("vs-th",[e._v(" Date of birth ")]),s("vs-th",[e._v(" E-mail contact ")])],1)]},proxy:!0},{key:"tbody",fn:function(){return e._l(e.$vs.getPage(e.$vs.getSearch(e.users,e.searchValue),e.page,e.max),(function(t,a){return s("vs-tr",{key:a,attrs:{data:t},scopedSlots:e._u([{key:"expand",fn:function(){return[s("div",{staticClass:"expanded__item"},[s("div",{staticClass:"expanded__item"},[s("vs-avatar",{staticClass:"redirect__profile",on:{click:function(r){return e.showUserProfile(t.userData.user.id,t.role)}}},[s("img",{attrs:{src:r("e25b"),alt:""}})]),s("b",[s("span",{staticClass:"user__name redirect__profile",on:{click:function(r){return e.showUserProfile(t.userData.user.id,t.role)}}},[e._v(" "+e._s(t.userData.user.first_name)+" "+e._s(t.userData.user.last_name)+" ")])])],1),s("div",{staticClass:"expanded__item right"},[s("vs-tooltip",{scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" Edit user ")]},proxy:!0}],null,!0)},[s("vs-button",{attrs:{icon:""},on:{click:function(r){return e.editUserProfile(t.userData.user.id,t.role)}}},[s("box-icon",{attrs:{name:"comment-edit",animation:"tada-hover"}})],1)],1),s("vs-tooltip",{scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" Remove user ")]},proxy:!0}],null,!0)},[s("vs-button",{attrs:{danger:"",icon:""},on:{click:function(r){return e.deleteUserDialog(t)}}},[s("box-icon",{attrs:{name:"trash",animation:"tada-hover"}})],1)],1)],1)])]},proxy:!0}],null,!0)},[s("vs-td",[s("span",{staticClass:"redirect__profile",on:{click:function(r){return e.showUserProfile(t.userData.user.id,t.role)}}},[e._v(" "+e._s(t.userData.user.first_name)+" "+e._s(t.userData.user.last_name)+" ")])]),s("vs-td",[s("b",[e._v(e._s(t.role))])]),s("vs-td",[e._v(" "+e._s(e.getDate(t.userData.user.date_of_birth))+" ")]),s("vs-td",[e._v(" "+e._s(e.getEmailContact(t.userData.user.email))+" ")])],1)}))},proxy:!0},{key:"footer",fn:function(){return[s("vs-pagination",{attrs:{length:e.$vs.getLength(e.users,e.max)},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]},proxy:!0}])})],1),s("vs-dialog",{attrs:{width:"500px"},scopedSlots:e._u([{key:"header",fn:function(){return[s("h5",[e._v(" Are you sure you want to delete "),s("b",[e._v(e._s(e.userToDelete.userData.name))]),e._v("? ")])]},proxy:!0},{key:"footer",fn:function(){return[s("div",{staticClass:"popup__right"},[s("vs-button",{attrs:{danger:"",border:"",disabled:-1===e.doctorToReplace&&"Doctor"===e.userToDelete.role},on:{click:function(t){return e.deleteUser()}}},[e._v(" Delete ")])],1)]},proxy:!0}]),model:{value:e.activeDelete,callback:function(t){e.activeDelete=t},expression:"activeDelete"}},[s("br"),"Doctor"===e.userToDelete.role?s("p",[e._v(" Please choose a new doctor who will be responsible for "),s("br"),e._v(" patients, examinations and other responsibilities of doctor currently being removed: ")]):e._e(),"Doctor"===e.userToDelete.role?s("vs-select",{staticClass:"popup__center",attrs:{label:"Choose responsible doctor",color:"primary"},scopedSlots:e._u([-1===e.doctorToReplace?{key:"message-warn",fn:function(){return[e._v(" Required ")]},proxy:!0}:null],null,!0),model:{value:e.doctorToReplace,callback:function(t){e.doctorToReplace=t},expression:"doctorToReplace"}},e._l(e.availableWithoutDeleted,(function(t){return s("vs-option",{key:t.user.id,attrs:{label:t.user.first_name,value:t.user.id}},[e._v(" "+e._s(t.user.first_name)+" ")])})),1):e._e(),s("br")],1)],1)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main__content"},[r("h1",[e._v("Users overview")]),r("p",[e._v(" In this module you can see the list of all users in this system."),r("br"),e._v(" You can manage particular information by clicking on a given user. ")])])}],n=(r("4de4"),r("4160"),r("ac1f"),r("5319"),r("159b"),r("96cf"),r("1da1")),o=r("1813"),u=r("ab39"),i=r("b2a5"),l=r("cb9c"),c=r("8e80"),d=r("fa1c"),f={name:"UsersOverview",data:function(){return{users:[],page:1,max:5,searchValue:"",userToDelete:{},activeDelete:!1,availableDoctors:[],doctorToReplace:-1}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAllUsers();case 2:case"end":return t.stop()}}),t)})))()},computed:{availableWithoutDeleted:function(){var e=this;return this.availableDoctors.filter((function(t){return t.user.id!==e.userToDelete.userData.user.id}))}},methods:{getDate:function(e){return d["a"].getDateForFrontend(e)},getAllUsers:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.users=[],o["a"].getAll().then((function(t){t.data.forEach((function(t){return e.users.push({userData:t,role:"Patient"})}))})),u["a"].getAll().then((function(t){t.data.forEach((function(t){return e.users.push({userData:t,role:"Doctor"})})),e.availableDoctors=t.data})),i["a"].getAll().then((function(t){t.data.forEach((function(t){return e.users.push({userData:t,role:"Health insurance worker"})}))}));case 4:case"end":return t.stop()}}),t)})))()},getEmailContact:function(e){return e||"Email not stated"},showUserProfile:function(e,t){this.$router.push({name:"profile",params:{id:e,role:t.replace(/ /g,"-").toLowerCase()}})},editUserProfile:function(e,t){this.$router.push({name:"edit-profile",params:{id:e,role:t.replace(/ /g,"-").toLowerCase()}})},deleteUserDialog:function(e){this.activeDelete=!0,this.userToDelete=e},deleteUser:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"Patient"===e.userToDelete.role&&o["a"].delete(e.userToDelete.userData.user.id).then((function(t){console.log(t),c["a"].successPopup("Patient successfully deleted.",e.$vs),e.getAllUsers(),e.activeDelete=!1,l["a"].delete(e.userToDelete.userData.user.id).then((function(e){console.log(e)})),e.$forceUpdate()})),"Health insurance worker"===e.userToDelete.role&&i["a"].delete(e.userToDelete.userData.user.id).then((function(t){console.log(t),c["a"].successPopup("Health insurance worker successfully deleted.",e.$vs),e.getAllUsers(),e.activeDelete=!1,l["a"].delete(e.userToDelete.userData.user.id).then((function(e){console.log(e)})),e.$forceUpdate()})),"Doctor"===e.userToDelete.role&&u["a"].deleteWithNewResponsible(e.userToDelete.userData.user.id,e.doctorToReplace).then((function(t){console.log(t),c["a"].successPopup("Health insurance worker successfully deleted.",e.$vs),e.getAllUsers(),e.activeDelete=!1,l["a"].delete(e.userToDelete.userData.user.id).then((function(e){console.log(e)})),e.$forceUpdate()}));case 3:case"end":return t.stop()}}),t)})))()}}},p=f,v=(r("c509"),r("0c7c")),h=Object(v["a"])(p,s,a,!1,null,"443fb029",null);t["default"]=h.exports},c509:function(e,t,r){"use strict";var s=r("f668"),a=r.n(s);a.a},e25b:function(e,t,r){e.exports=r.p+"img/user-illu.e50e46d1.jpg"},f668:function(e,t,r){},fa1c:function(e,t,r){"use strict";r("fb6a");var s=r("d4ec"),a=r("bee2"),n=function(){function e(){Object(s["a"])(this,e)}return Object(a["a"])(e,[{key:"getDateForBackend",value:function(e){var t=e.slice(8,10),r=e.slice(5,7),s=e.slice(0,4);return s+"-"+r+"-"+t}},{key:"getDateForFrontend",value:function(e){var t=e.slice(0,4),r=e.slice(5,7),s=e.slice(8,10),a=e.slice(11,19);return s+". "+r+". "+t+" "+a}}]),e}();t["a"]=new n}}]);
//# sourceMappingURL=chunk-49a2aeb3.f83d250f.js.map